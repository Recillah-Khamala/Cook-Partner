<div class="container shadow p-5 recipe_details">
  <h1 class="text-center mb-4"><%= @recipe.name %></h1>

  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <span class="h5">Preparation time:</span>
      <span> <%= @recipe.preparation_time %></span>
    </div>
    <div>
      <% if !current_user.nil? && current_user.id == @recipe.user_id %>
		<%= form_with model:@recipe, url:recipe_path(@recipe.id), html:{method: :put} do |form| %>
		    <div class="p-2 border-black border-1 rounded">
		      <%= form.label :public, class:"text-xl ml-5 flex-1 p-4" %>
		      <%= form.check_box :public, class: "mr-5 flex-1 border-black border-4 p-4 rounded", onchange: "this.form.submit()" %>
		    </div>
		<% end %>
	<% end %>
    </div>
  </div>

  <div class="mb-3">
    <span class="h5">Cooking time: </span>
    <span><%= @recipe.cooking_time %> </span>
  </div>

  <div class="mb-3">
    <span class="h5">Description</span>
    <p class="mt-2"><%= @recipe.description %></p>
  </div>

  <div class="d-flex justify-content-between mb-3">
    <%= link_to "Generate Shopping List", recipe_new_shopping_list_path(@recipe), class: "btn btn-primary" %>
    <%= link_to "Add ingredient", new_recipe_recipe_food_path(@recipe.id), class: "btn btn-primary" %>
  </div>

  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col">Food</th>
        <th scope="col">Quantity</th>
        <th scope="col">Value</th>
        <th scope="col">Action</th>
      </tr>
    </thead>
    <tbody>
      <% @recipe_foods.each do |recipe_food| %>
        <tr>
          <td><%= recipe_food.food.name %></td>
          <td><%= recipe_food.quantity %></td>
          <td>$<%= recipe_food.quantity * recipe_food.food.price %></td>
          <td>
            <% if current_user == recipe_food.recipe.user %>
              <%= button_to 'Remove', recipe_recipe_food_path(@recipe, recipe_food), method: :delete, class: "btn btn-danger" %>
            <% end %>
          </td>
        </tr>
      <% end %>
      <div>
        <%= link_to "Back to recipes", recipes_path, class: "btn btn-primary" %>
      </div>
    </tbody>
  </table>
</div>